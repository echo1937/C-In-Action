# 十三、计算机中数的表示

## 13.3 整数的加减运算

- 原码 [sign-and-magnitude](https://zh.wikipedia.org/wiki/%E5%8E%9F%E7%A0%81)
    - 把最高位规定为符号位(Sign Bit)，0表示正1表示负，剩下的7位表示绝对值的大小.
- 反码 [ones' complement](https://zh.wikipedia.org/wiki/%E5%8F%8D%E7%A0%81)
- 补码 [two's complement](https://zh.wikipedia.org/wiki/%E4%BA%8C%E8%A3%9C%E6%95%B8)
- 移码 [offset binary，excess-N](https://zh.wikipedia.org/wiki/%E7%A7%BB%E7%A0%81)

## [补数](https://zh.wikipedia.org/wiki/%E8%A1%A5%E6%95%B0) (十进制)

### 9's Complement

- 负数用9的补码表示
    - 负数-m的补码等于(10的n次方 - 1 - m)，n表示m的位数
    - 例如-498的补码等于(1000 - 1 - 498 = 501)
- 减法转换成加法，计算结果的最高位如果有进位则要加回到最低位上去。

|  数值 |-499|-498|...|-1 |0  |0  |1  |...|498|499
|------|----|----|---|---|---|---|---|---|---|---
|补码表示|500 |501 |...|998|999|0  |1  |...|498|499

### 10's Complement

- 负数用9的补码加1表示
    - 负数-m的补码等于(10的n次方 - m)，n表示m的位数
    - 例如-498的补码等于(1000 - 498 = 502)
- 减法转换成加法，忽略计算结果最高位的进位，不必加回到最低位上去。

|数值   |-500|-499|-498|...|-1 |0  |1  |...|498|499
|------|----|----|----|---|---|---|---|---|---|---
|补码表示|500 |501 |502-|...|999|0  |1  |...|498|499

### 补充:

- [9's and 10's Complement](https://www.javatpoint.com/9s-and-10s-complement-in-digital-electronics)

## [有符号数处理](https://zh.wikipedia.org/wiki/%E6%9C%89%E7%AC%A6%E8%99%9F%E6%95%B8%E8%99%95%E7%90%86) (二进制)

### 1's Complement

- 负数用1的补码表示
    - 负数-m的补码等于(2的n次方 - 1 - m)，n表示数据类型的位数
    - 例如-4的的补码等于(2的8次方 - 1 - 4 = 1111 1111 - 0000 0100 = 1111 1011)
- 因为1-1=0，1-0=1，取1的补码就是把每个bit取反，所以1的补码也称为反码。
- 减法转换成加法，计算结果的最高位如果有进位则要加回到最低位上去。

### 2's Complement

- 负数用1的补码加1表示
    - 负数-m的补码等于(2的n次方 - m)，n表示数据类型的位数
    - 例如-4的的补码等于(2的8次方 - 4 = 1 0000 0000 - 0000 0100 = 1111 1100)
- 因为1的补码也称为反码，所以2的补码就是反码加1
- 减法转换成加法，忽略计算结果最高位的进位，不必加回到最低位上去。

### 溢出问题：

- 8个bit采用2's Complement表示法的取值范围是-128~127，如果计算结果超出这个范围就会产生溢出，例如：
    - -126为1000 0010, -8为1111 1000, 累加为1 0111 1010,
    - 不计溢出位为0111 1010, 十进制为122(溢出值), 与-128(理论值)不符
- 溢出情况讨论
    - 如果两个正数相加溢出，结果一定是负数；
        - 正数最高位为0, 最大的正数是0111 1111, 溢出时次高位必有进位, 最高位没有进位(0+0+进位1)
    - 如果两个负数相加溢出，结果一定是正数；
        - 负数最高位为1, 最小的负数是1000 0000, 溢出时次高位必没有进位, 最高位有进位(1+1+进位0)
    - 一正一负相加，无论结果是正是负都不可能溢出。
        - [-128, 127]范围内的一个正数和另一个负数相加, 必然不可能超出这个区间
- 结论
    - 在相加过程中最高位产生的进位和次高位产生的进位如果相同则没有溢出，如果不同则表示有溢出。 逻辑电路的实现可以把这两个进位连接到一个异或门，把异或门的输出连接到溢出标志位。

### 补充

- [原码/反码/补码计算器](http://www.atoolbox.net/Tool.php?Id=952)
- [3. 整数的加减运算](https://docs.huihoo.com/c/linux-c-programming/ch14s03.html#id2754091)

## 浮点数

### 补充

- [浮点数](https://docs.huihoo.com/c/linux-c-programming/ch14s04.html)